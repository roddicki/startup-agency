<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="styles/style.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  

  <title>Startup Agency</title>
</head>

<body data-page="" class="d-flex flex-column min-vh-100">

<header id="header">
  <!-- imports header + nav from src/header.html -->
</header>


<section>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <button type="button" class="btn-primary" data-bs-toggle="modal" data-bs-target="#register-modal1">Sign up</button>
      </div>
    </div>

    <div class="row">
      
<!--Register second Modal-->

  <div class=" content-blocks centre-block">
    <div class="">
      
        <h2 class=" signinheader" id="RegModal1">Password reset</h2>


      <form class="Password-Reset  needs-validation" novalidate>
        <div class="modal-body">
         <!-- password row  -->
         <div class="row">
            <div class="col-12">
              <label for="password">Password*</label>
            </div>
        </div>
         <div class="row">
            <div class="col-10">
              <div class="accountFormToggle display-none" id="passwordForm">
                  
                  <input type='password' id="password" data-bv-identical placeholder="Password" name="password" class="form-control masked signincontent" value="" data-bv-notemty data-bv-excluded="false" pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" required>  
                  <label for="password" class="form-text">Min 8 characters inc 1 number</label>
                  <div class="invalid-feedback">
                    Your password must be minimum eight characters, including at least one letter and one number
                  </div>
              </div>
            </div>
            <div class="col-2">
              <i class="fa fa-eye showhide" id="eye"></i>
            </div>
          </div>

          <!-- confirn password row  -->
         <div class="row">
            <div class="col-10">
              <div class="accountFormToggle display-none" id="passwordForm">
                <label for="passwordConfirmation">Confirm Password*</label>
                <input type='password' id="passwordConfirmation" data-bv-identical placeholder="Confirm password" name="passwordConfirmation" autocomplete="off"  class="form-control masked signincontent" value="" data-bv-notemty data-bv-excluded="false" required>  
                <div class="invalid-feedback">
                  Password not a match.
                </div>
              </div>
            </div>
            <div class="col-2">
              <i class="fa fa-eye showhide" id="eye-confirmation"></i>
            </div>
          </div>

          <div class="gap"></div>
          <button class="btn btn-primary w-100" type="button" id="submit-Password">Reset Password</button>
        </form>
        <div class="gap"></div>
      </div>
      </div>
  
    </div>
  </div>

<!--End of Register second modal-->
    </div>
  </div>
</section>

<!--Register Welcome Modal-->
<div class="modal fade" id="SuccessPasswordModal" tabindex="-1" aria-labelledby="SuccessPasswordModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <img src="/dist/assets/img/Tickcircle.svg" height="150">
      <div class="row">
        <div class="col-12">
      <h2 class="modal-title signinheader modalheaddrmid" id="exampleModalLabel">Password has been Reset</h2>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <p>
           Thank you for resetting your password. Please contact us if you think their has been a mistake.
          </p>
          
          <div class="row">
              <div class="col-6">
                <div class="">
                  <button type="button" class="btn btn-primary btn-lg btn-block">Home</button>
                
                </div>
              </div>
              <div class="col-6">
                <div class="float-right">
                  <button type="button" class="btn btn-primary btn-lg btn-block">Portfolio</button>
                
                </div>
              </div>
          </div>
    </div>
    </div>
  </div>
</div>
</div>
<!--Register Welcome modal end-->


<span id="postjobmodal">
  <!--Import post job modal-->
</span>

<span id="signinmodal">
  <!--Import sign in modal-->
</span>

<footer id="footer" class="mt-auto">
  <!-- imports footer from src/footer.html -->
</footer>



<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- custom JS -->
<script src="scripts/app.bundle.js"></script>
<!-- event listeners -->
<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.bootstrapvalidator/0.5.2/js/bootstrapValidator.min.js"></script>

<script>

  //step 1 registration validaiton
  const regForm1 = document.querySelector('.reg-form1');
  const regForm1Submit = document.querySelector('#submit-reg1');

  const regModal1 = new bootstrap.Modal(document.querySelector('#register-modal1'));
  const successPasswordModal = new bootstrap.Modal(document.querySelector('#SuccessPasswordModal'));

  // Loop over inputs and prevent submission
  regForm1Submit.addEventListener('click', function (event) {
    console.log("modal 1 submit clicked");
    if (!regForm1.checkValidity()) {
      event.preventDefault();
      event.stopPropagation();
      console.log("modal 1 was-NOT-validated");
    }
    else {
      console.log("modal 1 was-validated");
      regModal1.hide();
      regModal2.show();
    }
    regForm1.classList.add('was-validated');
  }, false)



  //step 2 registration validation registration details
  const passwordReset = document.querySelector('.Password-Reset');
  const passwordSubmit = document.querySelector('#submit-Password');

  // Loop over inputs and prevent submission
  passwordSubmit.addEventListener('click', function (event) {
    console.log("modal 2 submit clicked");
    // check passwords match 
    if (document.querySelector("#password").value == document.querySelector("#passwordConfirmation").value) {
      document.querySelector("#passwordConfirmation").setCustomValidity("");
    }
    else {
      document.querySelector("#passwordConfirmation").setCustomValidity("Duplicate passwords do not match");
    }
    // other validation
    if (passwordReset.checkValidity() == false ) {
      event.preventDefault();
      event.stopPropagation();
      console.log("modal 12was-NOT-validated");
    }
    else {
      console.log("modal 2 was-validated");
      //regModal1.hide();
      successPasswordModal.show();
    }
    passwordReset.classList.add('was-validated');
  }, false)

// show hide password functions
function showPass(eye, id) {
    eye.classList.add("fa-eye-slash");
    eye.classList.remove("fa-eye");
    const p = document.getElementById(id);
    p.setAttribute('type', 'text');
}

function hidePass(eye, id) {
    eye.classList.add("fa-eye");
    eye.classList.remove("fa-eye-slash");
    const p = document.getElementById(id);
    p.setAttribute('type', 'password');
}

// show hide passsword
document.getElementById("eye").addEventListener("click", function () {
    const eye = document.getElementById("eye");
    if (eye.classList.contains("fa-eye")) {
      showPass(eye, "password");
    } else {
      hidePass(eye, "password");
    }
}, false);

// show hide conform passsword
document.getElementById("eye-confirmation").addEventListener("click", function () {
    const eye = document.getElementById("eye-confirmation");
    if (eye.classList.contains("fa-eye")) {
      showPass(eye, "passwordConfirmation");
    } else {
      hidePass(eye, "passwordConfirmation");
    }
}, false);


</script>


</body>